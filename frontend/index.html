<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WordPress AI 内容自动化引擎</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="page-header">
      <h1>WordPress AI 内容自动化引擎</h1>
      <p>输入长尾关键词、页面信息和 HTML 模板，一键生成并发布到 WordPress。</p>
    </header>

    <main>
      <section class="card">
        <form id="generator-form">
          <fieldset>
            <legend>⚙️ 后端配置</legend>
            <div class="form-row">
              <label for="backendUrl">后端 API 地址</label>
              <input type="url" id="backendUrl" name="backendUrl" value="http://localhost:4000" required />
              <small>Google AI Studio API Key 已在后端环境变量中配置，无需在此填写。</small>
            </div>
          </fieldset>

          <fieldset>
            <legend>🔐 WordPress 凭据</legend>
            <div class="form-row">
              <label for="wpUrl">WordPress 站点 URL</label>
              <input type="url" id="wpUrl" name="wpUrl" value="https://vertu.com/" required />
            </div>
            <div class="form-row">
              <label for="wpUsername">WordPress 用户名或邮箱</label>
              <input type="text" id="wpUsername" name="wpUsername" value="zicuo" placeholder="请输入 WordPress 用户名或邮箱地址" required />
              <small>⚠️ 重要：这不是应用密码的名称！这是登录 WordPress 后台时使用的用户名或注册邮箱地址。如何查找：登录 WordPress 后台 → 右上角查看用户信息，或进入"用户" → "所有用户"查看。</small>
            </div>
            <div class="form-row">
              <label for="wpAppPassword">WordPress 应用密码</label>
              <input type="password" id="wpAppPassword" name="wpAppPassword" value="KwYn WspZ W7iQ uUoh d73y BIji" placeholder="请输入 WordPress 应用密码（格式：xxxx xxxx xxxx xxxx）" required />
              <small>推荐使用 WordPress 应用密码，格式类似 xxxx xxxx xxxx xxxx。在 WordPress 后台 → 用户 → 个人资料 → 应用密码 中创建。</small>
            </div>
            <div class="form-row">
              <label for="useElementor" style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <input type="checkbox" id="useElementor" name="useElementor" style="width: auto; margin: 0;" checked />
                <span>使用 Elementor 保存页面（推荐，默认开启）</span>
              </label>
              <small>系统将默认通过 Elementor 保存页面，以更好地保留 HTML / CSS / JS。如站点未安装 Elementor，将自动回退到标准方式。</small>
            </div>
          </fieldset>

          <fieldset>
            <legend>📝 内容信息</legend>
            <div class="form-row">
              <label for="keyword">长尾关键词</label>
              <input type="text" id="keyword" name="keyword" placeholder="女士最佳防水登山鞋推荐" required />
            </div>
            <div class="form-row">
              <label>页面模板</label>
              <div class="template-selector" id="templateSelector">
                <input type="hidden" id="templateType" name="templateType" value="template-1" required>
                
                <div class="template-card" data-template="template-1">
                  <div class="template-card-image">
                    <img src="https://vertu-website-oss.vertu.com/2025/12/Preview-3-scaled.jpg" alt="模板1预览" loading="lazy">
                    <div class="template-card-overlay">
                      <button type="button" class="preview-btn" data-preview="https://vertu-website-oss.vertu.com/2025/12/Preview-3-scaled.jpg">Preview</button>
                    </div>
                  </div>
                  <div class="template-card-content">
                    <h3>模板1</h3>
                    <p>标题+内容+第一排产品+第二排产品</p>
                    <div class="template-card-check">
                      <span class="check-icon">✓</span>
                    </div>
                  </div>
                </div>

                <div class="template-card" data-template="template-2">
                  <div class="template-card-image">
                    <img src="https://vertu-website-oss.vertu.com/2025/12/screencapture-vertu-luxury-life-guides-how-to-choose-the-best-sapphire-screen-phone-2025-12-04-14_41_47-scaled.jpg" alt="模板2预览" loading="lazy">
                    <div class="template-card-overlay">
                      <button type="button" class="preview-btn" data-preview="https://vertu-website-oss.vertu.com/2025/12/screencapture-vertu-luxury-life-guides-how-to-choose-the-best-sapphire-screen-phone-2025-12-04-14_41_47-scaled.jpg">Preview</button>
                    </div>
                  </div>
                  <div class="template-card-content">
                    <h3>模板2</h3>
                    <p>标题+第一排产品+内容+第二排产品</p>
                    <div class="template-card-check">
                      <span class="check-icon">✓</span>
                    </div>
                  </div>
                </div>

                <div class="template-card" data-template="template-3">
                  <div class="template-card-image">
                    <img src="https://vertu-website-oss.vertu.com/2025/12/Preview-1-scaled.jpg" alt="模板3预览" loading="lazy">
                    <div class="template-card-overlay">
                      <button type="button" class="preview-btn" data-preview="https://vertu-website-oss.vertu.com/2025/12/Preview-1-scaled.jpg">Preview</button>
                    </div>
                  </div>
                  <div class="template-card-content">
                    <h3>模板3</h3>
                    <p>标题+第一排产品+内容+第二排产品+内容（无字数限制）</p>
                    <div class="template-card-check">
                      <span class="check-icon">✓</span>
                    </div>
                  </div>
                </div>
              </div>
              <small>点击卡片选择模板，点击Preview按钮查看全屏预览</small>
            </div>
            <div class="form-row">
              <label for="titleType">标题类型</label>
              <select id="titleType" name="titleType" required>
                <option value="">-- 请选择标题类型 --</option>
                <option value="purchase">Purchase/Transaction（购买/交易）</option>
                <option value="informational">Informational/Guide（信息/指南）</option>
                <option value="review">Review/Comparison（评论/比较）</option>
                <option value="commercial">Commercial/Deal（商业/优惠）</option>
                <option value="how-to">How to（如何）</option>
                <option value="recommendations">Recommendations（推荐）</option>
                <option value="services-guides">Services Guides（服务指南）</option>
                <option value="tech-insights">Tech Insights（技术洞察）</option>
                <option value="comparison">Comparison（比较）</option>
                <option value="expert">Expert/Authority（专家/权威）</option>
                <option value="best">Best（最佳）</option>
                <option value="top">Top（顶级）</option>
                <option value="top-ranking">Top Ranking（排名榜单）</option>
                <option value="most">Most（最多/最受欢迎）</option>
              </select>
              <small>选择标题类型，系统将根据关键词和选择的类型生成对应的标题</small>
            </div>
            <div class="form-row">
              <label for="pageTitle">页面标题（可选）</label>
              <input type="text" id="pageTitle" name="pageTitle" placeholder="留空将根据长尾词和选择的类型自动生成标题" />
              <small>如果留空，系统将根据长尾词和选择的标题类型自动生成一个包含该关键词的标题（英式英语）</small>
            </div>
            <div class="form-row">
              <label for="templateFile">上传 HTML 模板（可选）</label>
              <input type="file" id="templateFile" name="templateFile" accept=".html,.hbs,.handlebars,.txt" />
              <small>默认模板已自动加载。如需使用自定义模板，请上传文件。模板需包含占位符：{{PAGE_TITLE}}、{{{AI_GENERATED_CONTENT}}}、{{#each products}}...</small>
            </div>
            <div class="form-row">
              <label for="templateContent">模板内容</label>
              <textarea id="templateContent" name="templateContent" rows="12" placeholder="默认模板已自动加载，或在此粘贴自定义 HTML 模板"></textarea>
            </div>
          </fieldset>

          <button type="submit" class="primary-btn">生成并发布</button>
        </form>
      </section>

      <section class="card" id="progress-card">
        <h2>📊 任务进度</h2>
        
        <!-- 进度条 -->
        <div class="progress-bar-container">
          <div class="progress-bar-wrapper">
            <div id="progress-bar" class="progress-bar" style="width: 0%">
              <span id="progress-text" class="progress-text">0%</span>
            </div>
          </div>
          <div id="progress-status" class="progress-status">等待开始...</div>
        </div>

        <!-- 进度日志 -->
        <div id="progress-log" class="progress-log">
          <p>提交表单后将在此显示流程进度。</p>
        </div>
      </section>
    </main>

    <template id="product-template-hint">
      <pre>
&lt;h1&gt;{{PAGE_TITLE}}&lt;/h1&gt;
&lt;article&gt;{{AI_GENERATED_CONTENT}}&lt;/article&gt;
&lt;section class="related-products"&gt;
  &lt;h2&gt;相关产品推荐&lt;/h2&gt;
  {{#if products.length}}
    {{#each products}}
      &lt;div class="product-card"&gt;
        {{#if this.imageUrl}}
          &lt;img src="{{this.imageUrl}}" alt="{{this.name}}" /&gt;
        {{/if}}
        &lt;h3&gt;&lt;a href="{{this.link}}" target="_blank" rel="noopener"&gt;{{this.name}}&lt;/a&gt;&lt;/h3&gt;
        {{#if this.category}}
          &lt;p&gt;分类: {{this.category}}&lt;/p&gt;
        {{/if}}
      &lt;/div&gt;
    {{/each}}
  {{else}}
    &lt;p&gt;暂无相关产品。&lt;/p&gt;
  {{/if}}
&lt;/section&gt;
      </pre>
    </template>

    <script src="main.js" type="module"></script>
  </body>
</html>
